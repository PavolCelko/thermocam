#!/usr/bin/python

from PIL import Image
import numpy as np

# sviecka = [22, 21, 24, 23, 21, 21, 22, 21, 20, 20, 24, 24, 25, 24, 23, 21, 20, 20, 21, 21, 20, 21, 23, 22, 21, 21, 25, 25, 25, 26, 28, 27, 22, 22, 23, 22, 21, 21, 21, 20, 20, 20, 21, 22, 24, 24, 22, 21, 20, 20, 21, 20, 21, 21, 22, 21, 21, 21, 24, 24, 26, 26, 27, 26, 21, 21, 24, 22, 21, 21, 22, 21, 20, 20, 23, 24, 26, 26, 24, 22, 20, 20, 22, 21, 20, 20, 22, 22, 21, 21, 24, 24, 25, 25, 29, 27, 22, 22, 22, 21, 21, 21, 21, 20, 20, 20, 22, 22, 26, 26, 24, 21, 21, 20, 21, 20, 20, 20, 21, 20, 21, 21, 22, 22, 25, 26, 27, 27, 22, 22, 24, 23, 21, 21, 22, 21, 20, 20, 22, 23, 27, 29, 27, 24, 20, 20, 22, 21, 20, 20, 22, 21, 20, 20, 23, 23, 25, 26, 28, 27, 22, 22, 22, 22, 21, 21, 21, 20, 20, 20, 21, 22, 27, 28, 26, 23, 20, 20, 21, 20, 20, 20, 20, 20, 20, 20, 21, 23, 25, 26, 27, 27, 22, 22, 24, 22, 21, 21, 22, 21, 20, 20, 22, 22, 27, 31, 33, 28, 21, 21, 22, 21, 20, 20, 22, 20, 19, 20, 22, 23, 25, 26, 29, 27, 22, 22, 23, 22, 21, 21, 21, 20, 20, 20, 21, 22, 29, 31, 29, 25, 21, 21, 21, 20, 20, 20, 21, 20, 20, 20, 21, 22, 25, 26, 27, 26, 22, 22, 23, 23, 21, 21, 23, 21, 20, 20, 22, 21, 26, 32, 41, 35, 22, 21, 22, 21, 20, 20, 22, 21, 19, 19, 23, 24, 24, 25, 27, 27, 22, 23, 22, 22, 21, 21, 22, 20, 20, 20, 21, 21, 30, 35, 36, 30, 22, 21, 21, 20, 20, 20, 21, 20, 20, 20, 22, 23, 25, 26, 26, 26, 22, 22, 23, 23, 21, 21, 23, 21, 20, 20, 22, 21, 25, 32, 51, 48, 26, 23, 23, 21, 20, 20, 22, 21, 20, 20, 23, 24, 25, 26, 27, 27, 22, 22, 22, 22, 21, 21, 21, 20, 20, 20, 21, 21, 31, 39, 48, 40, 23, 22, 21, 20, 20, 20, 20, 20, 20, 20, 22, 23, 26, 26, 27, 26, 22, 21, 23, 22, 21, 21, 22, 21, 20, 20, 22, 21, 24, 30, 66, 71, 41, 28, 23, 21, 20, 20, 21, 20, 20, 20, 23, 24, 25, 25, 27, 26, 22, 22, 22, 21, 21, 21, 21, 21, 20, 20, 20, 21, 31, 44, 70, 62, 28, 23, 22, 21, 20, 20, 21, 20, 21, 21, 22, 23, 25, 25, 27, 26, 22, 21, 23, 22, 21, 21, 22, 22, 20, 20, 22, 22, 23, 29, 96, 127, 103, 66, 29, 28, 25, 24, 24, 23, 22, 21, 23, 23, 25, 25, 28, 27, 22, 22, 22, 21, 21, 22, 21, 21, 20, 20, 21, 21, 31, 50, 131, 134, 51, 34, 26, 25, 24, 24, 23, 22, 21, 21, 21, 23, 25, 26, 27, 26, 22, 21, 23, 22, 21, 21, 22, 22, 20, 20, 23, 26, 44, 52, 124, 174, 183, 146, 76, 65, 48, 41, 29, 27, 25, 25, 26, 25, 25, 26, 28, 27, 22, 22, 22, 22, 22, 21, 21, 21, 20, 21, 30, 38, 59, 75, 185, 202, 127, 96, 60, 53, 36, 31, 27, 26, 25, 25, 25, 25, 25, 26, 27, 26, 22, 21, 23, 22, 22, 22, 25, 24, 23, 24, 27, 27, 26, 27, 32, 35, 34, 31, 30, 29, 27, 27, 28, 27, 25, 24, 26, 25, 24, 24, 27, 27, 22, 22, 22, 22, 23, 23, 24, 23, 25, 25, 27, 27, 28, 29, 37, 38, 32, 31, 29, 28, 27, 27, 26, 25, 24, 25, 25, 24, 25, 25, 27, 26, 22, 21, 24, 22, 22, 22, 25, 24, 24, 24, 27, 27, 26, 26, 27, 27, 26, 26, 29, 28, 27, 27, 27, 26, 24, 24, 26, 25, 24, 24, 27, 27, 22, 23, 23, 22, 23, 24, 25, 24, 25, 26, 26, 27, 27, 27, 27, 26, 27, 28, 28, 27, 27, 26, 25, 25, 25, 25, 25, 24, 24, 25, 27, 26, 22, 22, 25, 25, 24, 24, 25, 25, 24, 24, 26, 25, 24, 25, 27, 26, 25, 25, 26, 26, 24, 24, 26, 25, 24, 24, 26, 25, 24, 24, 27, 26, 23, 24, 24, 24, 24, 25, 25, 25, 25, 25, 25, 25, 25, 26, 26, 26, 25, 25, 25, 24, 25, 25, 25, 24, 25, 25, 25, 24, 25, 26, 27, 25]

MIN_temp = -40
MAX_temp = -300
UPSCALE_FACTOR = 20

def list_to_image(sviecka):
    h = 24 * UPSCALE_FACTOR
    w = 32 * UPSCALE_FACTOR
    data = np.zeros((h, w, 3), dtype=np.uint8)

    spread_sviecka = []
    for i in sviecka:
        # print(i)
        spread_sviecka.append(int(255 / float(max(sviecka) - min(sviecka)) * i - min(sviecka) * 255 / float(max(sviecka) - min(sviecka))))
    
    # convering sviecka from list into array
    sviecka_ll = []
    for i in range(24):
        sviecka_ll.append(spread_sviecka[i * 32 : (i + 1) * 32])
    for i in range(len(sviecka_ll)):        
        for j in range(len(sviecka_ll[i])):
            sviecka_ll[i][j] = [sviecka_ll[i][j], sviecka_ll[i][j], sviecka_ll[i][j]]
    array_sviecka = np.array(sviecka_ll, dtype=np.uint8)
    
    img_orig = Image.fromarray(array_sviecka, 'RGB')
    
    img = img_orig.resize((w, h), Image.NEAREST)
    img.save('server/sviecka_nearest.jpg')
    
    img = img_orig.resize((w, h), Image.ANTIALIAS)
    img.save('server/sviecka_antial.jpg')
    
    img = img_orig.resize((w, h), Image.BILINEAR)
    img.save('server/sviecka_bilinear.jpg')
    
    img = img_orig.resize((w, h), Image.BICUBIC)
    img.save('server/sviecka_bicubic.jpg')
    
    img = img_orig.resize((w, h), Image.LANCZOS)
    img.save('server/sviecka_lanczos.jpg')
    
def print_temp_integer_map(temp_list):
    for i in range(0, len(temp_list), 32):
        if type(temp_list[2]) is float:
            print("{:02d}:"
            "{:03.1f}|{:03.1f}|{:03.1f}|{:03.1f}|{:03.1f}|{:03.1f}|{:03.1f}|{:03.1f}|{:03.1f}|{:03.1f}|{:03.1f}|{:03.1f}|{:03.1f}|{:03.1f}|{:03.1f}|{:03.1f}|"
            "{:03.1f}|{:03.1f}|{:03.1f}|{:03.1f}|{:03.1f}|{:03.1f}|{:03.1f}|{:03.1f}|{:03.1f}|{:03.1f}|{:03.1f}|{:03.1f}|{:03.1f}|{:03.1f}|{:03.1f}|{:03.1f}". 
            format(int(i/32), * temp_list[i:(i + 32)]))
        elif type(temp_list[2]) is int:
            print("{:02d}:"
            "{:03d}|{:03d}|{:03d}|{:03d}|{:03d}|{:03d}|{:03d}|{:03d}|{:03d}|{:03d}|{:03d}|{:03d}|{:03d}|{:03d}|{:03d}|{:03d}|"
            "{:03d}|{:03d}|{:03d}|{:03d}|{:03d}|{:03d}|{:03d}|{:03d}|{:03d}|{:03d}|{:03d}|{:03d}|{:03d}|{:03d}|{:03d}|{:03d}". 
            format(int(i/32), * temp_list[i:(i + 32)]))
        else:
            print("NOTHING to print!")
